<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extractor de Versículos</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1, h2 { margin-bottom: 10px; }
        textarea { width: 100%; margin-bottom: 10px; }
        ul { list-style-type: none; padding: 0; }
        li { margin: 5px 0; padding: 5px; border: 1px solid #ccc; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>Extractor de Versículos</h1>
    <textarea id="sermonText" rows="10" placeholder="Escribe tu sermón aquí..."></textarea><br>
    <button onclick="extractVerses()">Extraer Versículos</button>
    <button onclick="copyVerses()">Copiar Versículos</button>
    <h2>Versículos Extraídos</h2>
    <ul id="verseList"></ul>

    <script>
        const bookAbbreviations = {
    // Antiguo Testamento
    'GEN': 'Génesis', 'GEN.': 'Génesis', 'GN.': 'Genesis',
    'EX': 'Éxodo', 'EX.': 'Éxodo',
    'LEV': 'Levítico', 'LEV.': 'Levítico',
    'NUM': 'Números', 'NUM.': 'Números', 'NM.': 'Números', 'NM': 'Números',
    'DEU': 'Deuteronomio', 'DEU.': 'Deuteronomio',
    
    'JOS': 'Josué', 'JOS.': 'Josué',
    'JUE': 'Jueces', 'JUE.': 'Jueces',
    'RUT': 'Rut', 'RUT.': 'Rut',
    
    '1 SAM': '1 Samuel', '1 SAM.': '1 Samuel',
    '2 SAM': '2 Samuel', '2 SAM.': '2 Samuel', '2SAM.': '2 Samuel', '2SAM': '2 Samuel',
    '1 REY': '1 Reyes', '1 REY.': '1 Reyes', '1RE.': '1 Reyes', '1RE': '1 Reyes',
    '2 REY': '2 Reyes', '2 REY.': '2 Reyes',
    
    '1 CRON': '1 Crónicas', '1 CRON.': '1 Crónicas',
    '2 CRON': '2 Crónicas', '2 CRON.': '2 Crónicas', '2CR.': '2 Crónicas', '2CR': '2 Crónicas',
    'EZRA': 'Esdras', 'EZRA.': 'Esdras',
    'NEH': 'Nehemías', 'NEH.': 'Nehemías',
    'EST': 'Ester', 'EST.': 'Ester',
    
    'JOB': 'Job', 'JOB.': 'Job',
    'SAL': 'Salmos', 'SAL.': 'Salmos',
    'PRO': 'Proverbios', 'PRO.': 'Proverbios', 'PR.': 'Proverbios',
    'ECL': 'Eclesiastés', 'ECL.': 'Eclesiastés',
    'CANT': 'Cantar de los Cantares', 'CANT.': 'Cantar de los Cantares',
    
    'ISA': 'Isaías', 'ISA.': 'Isaías', 'IS.': 'Isaias', 'IS': 'Isaias',
    'JER': 'Jeremías', 'JER.': 'Jeremías', 'JR.': 'Jeremías', 'JR': 'Jeremías',
    'LAMENT': 'Lamentaciones', 'LAMENT.': 'Lamentaciones',
    'EZE': 'Ezequiel', 'EZE.': 'Ezequiel', 'EZ.': 'Ezequiel', 'EZ': 'Ezequiel',
    'DAN': 'Daniel', 'DAN.': 'Daniel',
    
    'OSE': 'Oseas', 'OSE.': 'Oseas',
    'JOEL': 'Joel', 'JOEL.': 'Joel',
    'AMO': 'Amós', 'AMO.': 'Amós',
    'ABD': 'Abdías', 'ABD.': 'Abdías',
    'JON': 'Jonás', 'JON.': 'Jonás',
    
    'MIC': 'Miqueas', 'MIC.': 'Miqueas', 'MQ.': 'Miqeas', 'MIQ.': 'Miqeas', 'MIQ': 'Miqeas',
    'NAM': 'Nahum', 'NAM.': 'Nahum',
    'HAB': 'Habacuc', 'HAB.': 'Habacuc',
    'SOF': 'Sofonías', 'SOF.': 'Sofonías',
    'HAG': 'Hageo', 'HAG.': 'Hageo',
    
    'ZAC': 'Zacarías', 'ZAC.': 'Zacarías',
    'MAL': 'Malaquías', 'MAL.': 'Malaquías',

    // Nuevo Testamento
    'MT': 'Mateo', 'MT.': 'Mateo',
    'MR': 'Marcos', 'MR.': 'Marcos',
    'LC': 'Lucas', 'LC.': 'Lucas',
    'JN': 'Juan', 'JN.': 'Juan',
    
    'HEB': 'Hebreos', 'HEB.': 'Hebreos', 'HE.': 'Hebreos',
    'SANTI': 'Santiago', 'SANTI.': 'Santiago', 'STG.': 'Santiago',
    '1PE.': '1 Pedro',
    'HCH.': 'Hechos', 'HCH': 'Hechos',
    'ROM': 'Romanos', 'ROM.': 'Romanos', 'RO.':'Romanos', 'RO':'Romanos',
    '1 CO': '1 Corintios', '1 CO.': '1 Corintios',
    '1CO': '1 Corintios', '1CO.': '1 Corintios', // Added
    '2 CO': '2 Corintios', '2 CO.': '2 Corintios',
    '2CO': '2 Corintios', '2Co.': '2 Corintios', '2CO.': '2 Corintios', '2COR.': '2 Corintios', '2COR': '2 Corintios',
    '2Co': '2 Corintios', // Added
    'GA.':'Gálatas', 'GA':'Gálatas', 'GAL':'Gálatas', 'GAL.':'Gálatas',
    'EF.':'Efesios', 'EF':'Efesios',
    
    'FIL.': 'Filipenses',          
    'COL.': 'Colosenses',          
    '1 TES': '1 Tesalonicenses', '1 TES.': '1 Tesalonicenses', '1TES.': '1 Tesalonicenses',
    '2 TES': '2 Tesalonicenses', '2 TES.': '2 Tesalonicenses',
    '1 TIM': '1 Timoteo', '1 TIM.': '1 Timoteo',
    '2 TIM': '2 Timoteo', '2 TIM.': '2 Timoteo', '2TIM.': '2 Timoteo',
    'TIT.': 'Tito',          

    '1 JUAN': '1 Juan', '1 JUAN.': '1 Juan', '1JN.':'1 Juan', '1JN':'1 Juan',
    '2 JUAN': '2 Juan', '2 JUAN.': '2 Juan',
    '3 JUAN': '3 Juan', '3 JUAN.': '3 Juan',
    'JUD': 'Judas', 'JUD.': 'Judas',
    
    'APOC': 'Apocalipsis', 'APOC.': 'Apocalipsis', 'AP.': 'Apocalipsis'
};

        function expandAbbreviation(verse) {
            let match = verse.match(/(\d*\s*[A-Za-zÁáÉéÍíÓóÚúÑñ]+\.?)\s*(\d+(?::\d+(?:-\d+)?(?:,\s?\d+)?)?)/);

            if (match) {
                let abbr = match[1].trim().toUpperCase();
                let numbers = match[2].trim();

                if (bookAbbreviations[abbr]) {
                    return bookAbbreviations[abbr] + ' ' + numbers;
                }
            }
            return verse;
        }

        function extractVerses() {
            const text = document.getElementById('sermonText').value;
            const pattern = /\b([0-9]*\s*[A-Za-zÁáÉéÍíÓóÚúÑñ]{1,3}\.?)\s*(\d+(?::\d+(?:-\d+)?(?:,\s*\d+)*)?)\b/g;
        
            let verses = [];
            const matches = text.match(pattern) || [];
            verses = matches.map(verse => expandAbbreviation(verse.trim()));
            
            const list = document.getElementById('verseList');
            list.innerHTML = verses.map(verse => `<li contenteditable="true">${verse}</li>`).join('');
        }

        
        function copyVerses() {
            const listItems = document.querySelectorAll('#verseList li');
            let copiedText = '';

            listItems.forEach(item => {
                copiedText += item.textContent.trim() + '\n'; // Collect only the displayed text
            });

            if (copiedText.trim()) {
                // Create a temporary textarea element
                const tempTextArea = document.createElement('textarea');
                tempTextArea.value = copiedText.trim();
                document.body.appendChild(tempTextArea);
                tempTextArea.select();
                document.execCommand('copy'); // Use execCommand to copy text
                document.body.removeChild(tempTextArea); // Clean up

                alert('Versículos copiados al portapapeles!');
            } else {
                alert('No hay versículos para copiar.');
            }
        }
    </script>
</body>
</html>